<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Glucose Response</title>
    <link rel="icon" type="image/png" href="gleco.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="../style.css">
    <script src="test_code.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<div class="explainer-section">
    <h2 class="section-title">Different Foods, Different Responses</h2>

    <p>Not all foods affect your blood glucose the same way. Here's how different foods typically impact
        glucose levels:</p>

    <div class="food-category-container"
        style="display: flex; justify-content: space-between; margin: 20px 0; flex-wrap: wrap;">
        <div class="food-category high-glycemic" onclick="selectFoodCategory('high')"
            style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="font-size: 40px; margin-bottom: 10px;">üçö</div>
            <h3>High Glycemic Foods</h3>
            <p>White bread, rice, potatoes, sugary drinks</p>
            <div
                style="background: #ffebee; color: #e53935; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                Large Spike</div>
        </div>

        <div class="food-category medium-glycemic" onclick="selectFoodCategory('medium')"
            style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="font-size: 40px; margin-bottom: 10px;">üçé</div>
            <h3>Medium Glycemic Foods</h3>
            <p>Whole fruit, oatmeal, sweet potatoes</p>
            <div
                style="background: #fff8e1; color: #ff9800; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                Moderate Spike</div>
        </div>

        <div class="food-category low-glycemic" onclick="selectFoodCategory('low')"
            style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
            <div style="font-size: 40px; margin-bottom: 10px;">ü•¶</div>
            <h3>Low Glycemic Foods</h3>
            <p>Non-starchy vegetables, beans, nuts</p>
            <div
                style="background: #e8f5e9; color: #4caf50; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                Minimal Spike</div>
        </div>
    </div>

    <div class="view-options" style="text-align: center; margin: 20px 0;">
        <button onclick="selectFoodCategory('all')" id="view-all-btn" class="food-toggle-btn"
            style="background: #0066CC; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">View
            All</button>
        <button onclick="selectFoodCategory('high')" id="high-btn" class="food-toggle-btn"
            style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">White
            Rice</button>
        <button onclick="selectFoodCategory('medium')" id="medium-btn" class="food-toggle-btn"
            style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">Apple</button>
        <button onclick="selectFoodCategory('low')" id="low-btn" class="food-toggle-btn"
            style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">Broccoli</button>
    </div>

    <!-- NEW GRAPH HERE -->
    <div class="graph-container"
        style="position: relative; height: 400px; margin: 30px 0; overflow: hidden; border: 1px solid #eee; background: white; border-radius: 8px;">
        <svg id="food-comparison-graph" width="100%" height="100%" viewBox="0 0 800 400"
            preserveAspectRatio="xMidYMid meet">
            <!-- X and Y axis -->
            <line x1="80" y1="320" x2="750" y2="320" stroke="#333" stroke-width="2" />
            <line x1="80" y1="50" x2="80" y2="320" stroke="#333" stroke-width="2" />

            <!-- Horizontal guidelines -->
            <line x1="80" y1="80" x2="750" y2="80" stroke="#eee" stroke-width="1" />
            <line x1="80" y1="160" x2="750" y2="160" stroke="#eee" stroke-width="1" />
            <line x1="80" y1="240" x2="750" y2="240" stroke="#eee" stroke-width="1" />
            <line x1="80" y1="320" x2="750" y2="320" stroke="#eee" stroke-width="1" />

            <!-- Vertical guidelines/time markers -->
            <line x1="190" y1="320" x2="190" y2="325" stroke="#888" stroke-width="1" />
            <text x="190" y="345" text-anchor="middle" font-size="14">30 min</text>
            <line x1="300" y1="320" x2="300" y2="325" stroke="#888" stroke-width="1" />
            <text x="300" y="345" text-anchor="middle" font-size="14">60 min</text>
            <line x1="410" y1="320" x2="410" y2="325" stroke="#888" stroke-width="1" />
            <text x="410" y="345" text-anchor="middle" font-size="14">90 min</text>
            <line x1="520" y1="320" x2="520" y2="325" stroke="#888" stroke-width="1" />
            <text x="520" y="345" text-anchor="middle" font-size="14">120 min</text>
            <line x1="630" y1="320" x2="630" y2="325" stroke="#888" stroke-width="1" />
            <text x="630" y="345" text-anchor="middle" font-size="14">150 min</text>
            <line x1="80" y1="320" x2="80" y2="325" stroke="#888" stroke-width="1" />
            <text x="80" y="345" text-anchor="middle" font-size="14">0 min</text>

            <!-- Glucose level markers -->
            <text x="70" y="320" text-anchor="end" font-size="14">70</text>
            <text x="70" y="240" text-anchor="end" font-size="14">100</text>
            <text x="70" y="160" text-anchor="end" font-size="14">130</text>
            <text x="70" y="80" text-anchor="end" font-size="14">160</text>

            <!-- Food consumed label -->
            <text x="400" y="35" text-anchor="middle" font-size="16" font-weight="bold">Food Consumed</text>
            <line x1="140" y1="50" x2="140" y2="320" stroke="#ccc" stroke-width="1"
                stroke-dasharray="5,5" />

            <!-- Glucose curves for different foods -->
            <!-- White Rice (high glycemic) - red -->
            <path id="high-glycemic-curve"
                d="M80,290 C120,290 150,200 190,120 C230,60 270,80 300,100 C340,150 380,220 410,260 C440,290 520,290 630,290"
                fill="none" stroke="#e53935" stroke-width="3" />

            <!-- Apple (medium glycemic) - orange -->
            <path id="medium-glycemic-curve"
                d="M80,290 C120,290 150,240 190,180 C230,160 270,170 300,190 C340,220 380,260 410,270 C440,280 520,290 630,290"
                fill="none" stroke="#ff9800" stroke-width="3" />

            <!-- Broccoli (low glycemic) - green -->
            <path id="low-glycemic-curve"
                d="M80,290 C120,290 150,275 190,260 C230,255 270,260 300,270 C340,280 380,285 410,290 C440,290 520,290 630,290"
                fill="none" stroke="#4caf50" stroke-width="3" />

            <!-- Annotations - these will be shown/hidden based on selection -->
            <!-- White Rice annotation -->
            <g id="high-glycemic-annotation">
                <rect x="360" y="60" width="200" height="50" rx="5" fill="white" stroke="#ddd"
                    stroke-width="1" />
                <text x="370" y="85" font-size="14" fill="#e53935">White rice causes rapid</text>
                <text x="370" y="105" font-size="14" fill="#e53935">high glucose spike</text>
                <line x1="300" y1="100" x2="360" y2="85" stroke="#e53935" stroke-width="1"
                    stroke-dasharray="3,3" />
            </g>

            <!-- Apple annotation -->
            <g id="medium-glycemic-annotation">
                <rect x="450" y="160" width="220" height="50" rx="5" fill="white" stroke="#ddd"
                    stroke-width="1" />
                <text x="460" y="185" font-size="14" fill="#ff9800">Apple causes moderate spike</text>
                <text x="460" y="205" font-size="14" fill="#ff9800">due to fiber content</text>
                <line x1="350" y1="185" x2="450" y2="185" stroke="#ff9800" stroke-width="1"
                    stroke-dasharray="3,3" />
            </g>

            <!-- Legend -->
            <g id="legend" class="legend">
                <text x="700" y="100" text-anchor="end" font-size="14" fill="#e53935">White Rice</text>
                <line x1="660" y1="96" x2="680" y2="96" stroke="#e53935" stroke-width="3" />

                <text x="700" y="125" text-anchor="end" font-size="14" fill="#ff9800">Apple</text>
                <line x1="660" y1="121" x2="680" y2="121" stroke="#ff9800" stroke-width="3" />

                <text x="700" y="150" text-anchor="end" font-size="14" fill="#4caf50">Broccoli</text>
                <line x1="660" y1="146" x2="680" y2="146" stroke="#4caf50" stroke-width="3" />
            </g>

            <!-- Tooltip line - initially hidden -->
            <line id="food-tooltip-line" x1="0" y1="50" x2="0" y2="320" stroke="#0066CC" stroke-width="2"
                style="display: none;" />

            <!-- Tooltip glucose points - initially hidden -->
            <circle id="high-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#e53935"
                stroke-width="2" style="display: none;" />
            <circle id="medium-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#ff9800"
                stroke-width="2" style="display: none;" />
            <circle id="low-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#4caf50"
                stroke-width="2" style="display: none;" />
        </svg>

        <!-- Tooltip container -->
        <div id="food-glucose-tooltip"
            style="position: absolute; display: none; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; font-size: 14px; pointer-events: none; z-index: 100;">
        </div>
    </div>

    <p>Understanding how different foods affect your glucose can help you make informed choices for better
        health and energy levels throughout the day.</p>
</div>