<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Glucose Response</title>
    <link rel="icon" type="image/png" href="gleco.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <script src="code.js"></script>
</head>

<body>
    <!-- Add this right after the opening body tag -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="loading-title">Snack & Spike</div>
            <div class="candy-wrapper">
                <div class="candy-filling" id="candy-filling"></div>
                <div class="glucose-dots">
                    <div class="glucose-dot"></div>
                    <div class="glucose-dot"></div>
                    <div class="glucose-dot"></div>
                </div>
            </div>
            <div class="loading-text">Analyzing glucose data... <span class="loading-percentage"
                    id="loading-percentage">0%</span></div>
        </div>
    </div>

    <div id="canvas"></div>


    <div class="container">
        <h1>Snack & Spike: Understanding Your Glucose Response</h1>

        <!-- Navigation tabs for switching between explainer and game -->
        <div style="display: flex; width: 100%; max-width: 800px; margin-bottom: 20px;">
            <button id="explainer-tab" class="nav-button" style="flex: 1; margin-right: 10px; background: #0066CC;">
                Learn About Glucose
            </button>
            <button id="game-tab" class="nav-button" style="flex: 1; background: #cccccc;">
                Prediction Game
            </button>
        </div>

        <div id="explainer-content">
            <div class="explainer-section">
                <h2 class="section-title">What is Blood Glucose?</h2>

                <p>Blood glucose (blood sugar) is the main sugar found in your bloodstream and your body's primary
                    energy source. It comes from the food you eat, especially carbohydrates like sugars and starches.
                </p>

                <p>Your body carefully regulates blood glucose levels to maintain them within a healthy range:</p>

                <div class="info-box">
                    <strong>Normal Blood Glucose Ranges:</strong>
                    <ul>
                        <li>Fasting (before meals): 70-99 mg/dL</li>
                        <li>After meals: Less than 140 mg/dL</li>
                        <li>Random checks: Less than 140 mg/dL</li>
                    </ul>
                </div>

                <p>When glucose levels rise too high or fall too low, it can affect how you feel and potentially impact
                    your health over time.</p>
            </div>

            <div class="explainer-section">
                <h2 class="section-title">Understanding Glucose Spikes</h2>

                <p>When you eat, especially foods containing carbohydrates, your blood glucose levels rise. This is
                    called a "glucose spike" or "postprandial spike" (after meal spike).</p>

                <div class="graph-container" style="height: 350px;">
                    <!-- Sample glucose graph showing daily pattern with meals -->
                    <svg width="700" height="300" viewBox="0 0 700 300">
                        <!-- Background grid -->
                        <line x1="0" y1="60" x2="700" y2="60" stroke="#eee" stroke-width="1" />
                        <line x1="0" y1="120" x2="700" y2="120" stroke="#eee" stroke-width="1" />
                        <line x1="0" y1="180" x2="700" y2="180" stroke="#eee" stroke-width="1" />
                        <line x1="0" y1="240" x2="700" y2="240" stroke="#eee" stroke-width="1" />

                        <!-- Time markers -->
                        <line x1="100" y1="240" x2="100" y2="245" stroke="#888" stroke-width="1" />
                        <text x="100" y="260" text-anchor="middle" font-size="12">8:00</text>
                        <line x1="200" y1="240" x2="200" y2="245" stroke="#888" stroke-width="1" />
                        <text x="200" y="260" text-anchor="middle" font-size="12">10:00</text>
                        <line x1="300" y1="240" x2="300" y2="245" stroke="#888" stroke-width="1" />
                        <text x="300" y="260" text-anchor="middle" font-size="12">12:00</text>
                        <line x1="400" y1="240" x2="400" y2="245" stroke="#888" stroke-width="1" />
                        <text x="400" y="260" text-anchor="middle" font-size="12">14:00</text>
                        <line x1="500" y1="240" x2="500" y2="245" stroke="#888" stroke-width="1" />
                        <text x="500" y="260" text-anchor="middle" font-size="12">16:00</text>
                        <line x1="600" y1="240" x2="600" y2="245" stroke="#888" stroke-width="1" />
                        <text x="600" y="260" text-anchor="middle" font-size="12">18:00</text>

                        <!-- Glucose level markers -->
                        <text x="30" y="240" text-anchor="end" font-size="12">70</text>
                        <text x="30" y="180" text-anchor="end" font-size="12">100</text>
                        <text x="30" y="120" text-anchor="end" font-size="12">130</text>
                        <text x="30" y="60" text-anchor="end" font-size="12">160</text>

                        <!-- Healthy range -->
                        <rect x="40" y="180" width="660" height="60" fill="rgba(150, 220, 150, 0.2)" stroke="#4CAF50"
                            stroke-width="1" stroke-dasharray="5,5" />
                        <text x="50" y="200" font-size="12" fill="#388e3c">Healthy Range</text>

                        <!-- Meal markers -->
                        <line x1="100" y1="40" x2="100" y2="280" stroke="rgba(255, 0, 0, 0.5)" stroke-width="2" />
                        <text x="110" y="50" font-size="12" fill="#d32f2f">Breakfast</text>

                        <line x1="300" y1="40" x2="300" y2="280" stroke="rgba(255, 0, 0, 0.5)" stroke-width="2" />
                        <text x="310" y="50" font-size="12" fill="#d32f2f">Lunch</text>

                        <line x1="500" y1="40" x2="500" y2="280" stroke="rgba(255, 0, 0, 0.5)" stroke-width="2" />
                        <text x="510" y="50" font-size="12" fill="#d32f2f">Dinner</text>

                        <!-- Glucose curve -->
                        <path
                            d="M40,210 C70,205 90,208 100,210 C110,210 120,160 140,120 C160,80 180,100 200,140 C220,180 270,210 300,210 C330,210 340,100 360,80 C380,70 400,120 420,160 C440,200 480,210 500,210 C520,210 530,110 550,90 C570,80 590,120 620,170 C650,210 670,215 700,220"
                            fill="none" stroke="#0066CC" stroke-width="3" />

                        <!-- Annotations -->
                        <rect x="140" y="80" width="150" height="40" rx="5" fill="rgba(255,255,255,0.9)"
                            stroke="#ddd" />
                        <text x="150" y="100" font-size="12" fill="#333">High carb breakfast causes</text>
                        <text x="150" y="115" font-size="12" fill="#333">steep glucose spike</text>
                        <line x1="140" y1="100" x2="120" y2="120" stroke="#888" stroke-width="1"
                            stroke-dasharray="2,2" />

                        <rect x="360" y="50" width="150" height="40" rx="5" fill="rgba(255,255,255,0.9)"
                            stroke="#ddd" />
                        <text x="370" y="70" font-size="12" fill="#333">Lunch spike with more</text>
                        <text x="370" y="85" font-size="12" fill="#333">gradual return to baseline</text>
                        <line x1="360" y1="70" x2="340" y2="85" stroke="#888" stroke-width="1" stroke-dasharray="2,2" />

                        <rect x="550" y="140" width="120" height="40" rx="5" fill="rgba(255,255,255,0.9)"
                            stroke="#ddd" />
                        <text x="560" y="160" font-size="12" fill="#333">Dinner with protein</text>
                        <text x="560" y="175" font-size="12" fill="#333">moderate spike</text>
                        <line x1="550" y1="160" x2="520" y2="140" stroke="#888" stroke-width="1"
                            stroke-dasharray="2,2" />
                    </svg>

                    <div class="annotation" style="top: 10px; right: 20px;">
                        <strong>Glucose levels throughout a day</strong><br>
                        Notice how each meal causes a different spike pattern based on what was eaten.
                    </div>
                </div>

                <p>The size and duration of glucose spikes depend on several factors:</p>

                <div class="info-box">
                    <strong>What affects your glucose spikes:</strong>
                    <ul>
                        <li><strong>Carbohydrate content:</strong> Higher carbs typically cause larger spikes</li>
                        <li><strong>Food composition:</strong> Fiber, protein, and fat can slow digestion and moderate
                            spikes</li>
                        <li><strong>Time of day:</strong> Many people experience larger spikes in the morning</li>
                        <li><strong>Individual factors:</strong> Metabolism, insulin sensitivity, and activity level
                        </li>
                    </ul>
                </div>

                <p>Frequent, large glucose spikes followed by crashes can contribute to fatigue, hunger, cravings, and
                    over time, may increase risk for conditions like insulin resistance and type 2 diabetes.</p>
            </div>

            <div class="explainer-section">
                <h2 class="section-title">Different Foods, Different Responses</h2>

                <p>Not all foods affect your blood glucose the same way. Here's how different foods typically impact
                    glucose levels:</p>

                <div class="food-category-container"
                    style="display: flex; justify-content: space-between; margin: 20px 0; flex-wrap: wrap;">
                    <div class="food-category high-glycemic" onclick="selectFoodCategory('high')"
                        style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="font-size: 40px; margin-bottom: 10px;">🍚</div>
                        <h3>High Glycemic Foods</h3>
                        <p>White bread, rice, potatoes, sugary drinks</p>
                        <div
                            style="background: #ffebee; color: #e53935; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                            Large Spike</div>
                    </div>

                    <div class="food-category medium-glycemic" onclick="selectFoodCategory('medium')"
                        style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="font-size: 40px; margin-bottom: 10px;">🍎</div>
                        <h3>Medium Glycemic Foods</h3>
                        <p>Whole fruit, oatmeal, sweet potatoes</p>
                        <div
                            style="background: #fff8e1; color: #ff9800; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                            Moderate Spike</div>
                    </div>

                    <div class="food-category low-glycemic" onclick="selectFoodCategory('low')"
                        style="flex: 1; min-width: 200px; margin: 5px; padding: 20px; border-radius: 10px; border: 2px solid #f0f0f0; cursor: pointer; text-align: center; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                        <div style="font-size: 40px; margin-bottom: 10px;">🥦</div>
                        <h3>Low Glycemic Foods</h3>
                        <p>Non-starchy vegetables, beans, nuts</p>
                        <div
                            style="background: #e8f5e9; color: #4caf50; padding: 5px 15px; border-radius: 20px; display: inline-block; margin-top: 10px;">
                            Minimal Spike</div>
                    </div>
                </div>

                <div class="view-options" style="text-align: center; margin: 20px 0;">
                    <button onclick="selectFoodCategory('all')" id="view-all-btn" class="food-toggle-btn"
                        style="background: #0066CC; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">View
                        All</button>
                    <button onclick="selectFoodCategory('high')" id="high-btn" class="food-toggle-btn"
                        style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">White
                        Rice</button>
                    <button onclick="selectFoodCategory('medium')" id="medium-btn" class="food-toggle-btn"
                        style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">Apple</button>
                    <button onclick="selectFoodCategory('low')" id="low-btn" class="food-toggle-btn"
                        style="background: #f5f5f7; color: #333; border: 1px solid #ddd; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin: 0 5px;">Broccoli</button>
                </div>

                <!-- NEW GRAPH HERE -->
                <div class="graph-container"
                    style="position: relative; height: 400px; margin: 30px 0; overflow: hidden; border: 1px solid #eee; background: white; border-radius: 8px;">
                    <svg id="food-comparison-graph" width="100%" height="100%" viewBox="0 0 800 400"
                        preserveAspectRatio="xMidYMid meet">
                        <!-- X and Y axis -->
                        <line x1="80" y1="320" x2="750" y2="320" stroke="#333" stroke-width="2" />
                        <line x1="80" y1="50" x2="80" y2="320" stroke="#333" stroke-width="2" />

                        <!-- Horizontal guidelines -->
                        <line x1="80" y1="80" x2="750" y2="80" stroke="#eee" stroke-width="1" />
                        <line x1="80" y1="160" x2="750" y2="160" stroke="#eee" stroke-width="1" />
                        <line x1="80" y1="240" x2="750" y2="240" stroke="#eee" stroke-width="1" />
                        <line x1="80" y1="320" x2="750" y2="320" stroke="#eee" stroke-width="1" />

                        <!-- Vertical guidelines/time markers -->
                        <line x1="190" y1="320" x2="190" y2="325" stroke="#888" stroke-width="1" />
                        <text x="190" y="345" text-anchor="middle" font-size="14">30 min</text>
                        <line x1="300" y1="320" x2="300" y2="325" stroke="#888" stroke-width="1" />
                        <text x="300" y="345" text-anchor="middle" font-size="14">60 min</text>
                        <line x1="410" y1="320" x2="410" y2="325" stroke="#888" stroke-width="1" />
                        <text x="410" y="345" text-anchor="middle" font-size="14">90 min</text>
                        <line x1="520" y1="320" x2="520" y2="325" stroke="#888" stroke-width="1" />
                        <text x="520" y="345" text-anchor="middle" font-size="14">120 min</text>
                        <line x1="630" y1="320" x2="630" y2="325" stroke="#888" stroke-width="1" />
                        <text x="630" y="345" text-anchor="middle" font-size="14">150 min</text>
                        <line x1="80" y1="320" x2="80" y2="325" stroke="#888" stroke-width="1" />
                        <text x="80" y="345" text-anchor="middle" font-size="14">0 min</text>

                        <!-- Glucose level markers -->
                        <text x="70" y="320" text-anchor="end" font-size="14">70</text>
                        <text x="70" y="240" text-anchor="end" font-size="14">100</text>
                        <text x="70" y="160" text-anchor="end" font-size="14">130</text>
                        <text x="70" y="80" text-anchor="end" font-size="14">160</text>

                        <!-- Food consumed label -->
                        <text x="400" y="35" text-anchor="middle" font-size="16" font-weight="bold">Food Consumed</text>
                        <line x1="140" y1="50" x2="140" y2="320" stroke="#ccc" stroke-width="1"
                            stroke-dasharray="5,5" />

                        <!-- Glucose curves for different foods -->
                        <!-- White Rice (high glycemic) - red -->
                        <path id="high-glycemic-curve"
                            d="M80,290 C120,290 150,200 190,120 C230,60 270,80 300,100 C340,150 380,220 410,260 C440,290 520,290 630,290"
                            fill="none" stroke="#e53935" stroke-width="3" />

                        <!-- Apple (medium glycemic) - orange -->
                        <path id="medium-glycemic-curve"
                            d="M80,290 C120,290 150,240 190,180 C230,160 270,170 300,190 C340,220 380,260 410,270 C440,280 520,290 630,290"
                            fill="none" stroke="#ff9800" stroke-width="3" />

                        <!-- Broccoli (low glycemic) - green -->
                        <path id="low-glycemic-curve"
                            d="M80,290 C120,290 150,275 190,260 C230,255 270,260 300,270 C340,280 380,285 410,290 C440,290 520,290 630,290"
                            fill="none" stroke="#4caf50" stroke-width="3" />

                        <!-- Annotations - these will be shown/hidden based on selection -->
                        <!-- White Rice annotation -->
                        <g id="high-glycemic-annotation">
                            <rect x="360" y="60" width="200" height="50" rx="5" fill="white" stroke="#ddd"
                                stroke-width="1" />
                            <text x="370" y="85" font-size="14" fill="#e53935">White rice causes rapid</text>
                            <text x="370" y="105" font-size="14" fill="#e53935">high glucose spike</text>
                            <line x1="300" y1="100" x2="360" y2="85" stroke="#e53935" stroke-width="1"
                                stroke-dasharray="3,3" />
                        </g>

                        <!-- Apple annotation -->
                        <g id="medium-glycemic-annotation">
                            <rect x="450" y="160" width="220" height="50" rx="5" fill="white" stroke="#ddd"
                                stroke-width="1" />
                            <text x="460" y="185" font-size="14" fill="#ff9800">Apple causes moderate spike</text>
                            <text x="460" y="205" font-size="14" fill="#ff9800">due to fiber content</text>
                            <line x1="350" y1="185" x2="450" y2="185" stroke="#ff9800" stroke-width="1"
                                stroke-dasharray="3,3" />
                        </g>

                        <!-- Legend -->
                        <g id="legend" class="legend">
                            <text x="700" y="100" text-anchor="end" font-size="14" fill="#e53935">White Rice</text>
                            <line x1="660" y1="96" x2="680" y2="96" stroke="#e53935" stroke-width="3" />

                            <text x="700" y="125" text-anchor="end" font-size="14" fill="#ff9800">Apple</text>
                            <line x1="660" y1="121" x2="680" y2="121" stroke="#ff9800" stroke-width="3" />

                            <text x="700" y="150" text-anchor="end" font-size="14" fill="#4caf50">Broccoli</text>
                            <line x1="660" y1="146" x2="680" y2="146" stroke="#4caf50" stroke-width="3" />
                        </g>

                        <!-- Tooltip line - initially hidden -->
                        <line id="food-tooltip-line" x1="0" y1="50" x2="0" y2="320" stroke="#0066CC" stroke-width="2"
                            style="display: none;" />

                        <!-- Tooltip glucose points - initially hidden -->
                        <circle id="high-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#e53935"
                            stroke-width="2" style="display: none;" />
                        <circle id="medium-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#ff9800"
                            stroke-width="2" style="display: none;" />
                        <circle id="low-glucose-point" cx="0" cy="0" r="5" fill="white" stroke="#4caf50"
                            stroke-width="2" style="display: none;" />
                    </svg>

                    <!-- Tooltip container -->
                    <div id="food-glucose-tooltip"
                        style="position: absolute; display: none; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 4px; font-size: 14px; pointer-events: none; z-index: 100;">
                    </div>
                </div>

                <p>Understanding how different foods affect your glucose can help you make informed choices for better
                    health and energy levels throughout the day.</p>
            </div>

            <div class="explainer-section">
                <h2 class="section-title">Why Monitor Glucose Patterns?</h2>

                <p>Understanding your glucose patterns can help you:</p>

                <ul>
                    <li><strong>Identify trigger foods</strong> that cause larger spikes than expected</li>
                    <li><strong>Optimize meal timing</strong> for better energy throughout the day</li>
                    <li><strong>Discover personal responses</strong> that may differ from typical patterns</li>
                    <li><strong>Make informed food choices</strong> based on their impact on your body</li>
                    <li><strong>Reduce energy crashes</strong> that can affect mood and productivity</li>
                </ul>

                <div class="info-box">
                    <p><strong>Did you know?</strong> Glucose responses can vary significantly between individuals, even
                        when eating identical foods. This is due to differences in metabolism, gut microbiome, and other
                        personal factors.</p>
                </div>

                <p>Ready to test your understanding? Click the "Start Prediction Game" button below to see if you can
                    predict how different foods will affect glucose levels!</p>

                <div class="nav-buttons">
                    <button id="start-game-btn" class="nav-button">Start Prediction Game</button>
                </div>
            </div>
        </div>

        <!-- Game content from the second file -->
        <div id="game-content">
            <!-- Move patient profile and challenge description above the clock -->
            <div class="patient-profile" style="margin: 0 auto 30px;">
                <h3>Patient Profile: Sarah Johnson</h3>
                <div class="vital-stats">
                    <div class="stat-item">
                        <div class="stat-label">Age</div>
                        <div class="stat-value">34</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">BMI</div>
                        <div class="stat-value">24.5</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">A1C</div>
                        <div class="stat-value">5.6%</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Fasting Glucose</div>
                        <div class="stat-value">95 mg/dL</div>
                    </div>
                </div>

                <div class="glucose-alert">
                    <h4>Glucose Event Detected</h4>
                    <p>Sarah experienced a <strong>glucose spike of 152 mg/dL at 2:00 PM</strong> today. She reported
                        feeling fatigued, mildly thirsty, and had difficulty concentrating around this time.</p>
                    <p>She's using continuous glucose monitoring to understand how different foods affect her levels,
                        but doesn't remember exactly when she ate before this spike occurred.</p>
                </div>

                <div class="challenge-box">
                    <h4 style="margin-top: 0;">Your Challenge</h4>
                    <p>Look at Sarah's glucose spike at 2:00 PM. When do you think she ate something that caused this
                        response?</p>
                    <p><strong>Instructions:</strong> Drag a food from below and drop it on the clock to indicate when
                        you think Sarah ate it.</p>
                </div>


                <!-- Food options moved above the clock -->
                <div class="food-selection" style="margin: 0 auto 30px; max-width: 800px;">
                    <div class="food-option draggable" data-food="apple" data-impact="medium" data-timing="30-45">🍎
                        Apple</div>
                    <div class="food-option draggable" data-food="rice" data-impact="high" data-timing="45-60">🍚 White
                        Rice</div>
                    <div class="food-option draggable" data-food="chicken" data-impact="low" data-timing="60-90">🍗
                        Chicken</div>
                    <div class="food-option draggable" data-food="ice-cream" data-impact="high" data-timing="30-45">🍦
                        Ice Cream</div>
                    <div class="food-option draggable" data-food="salad" data-impact="low" data-timing="minimal">🥗
                        Salad</div>
                    <div class="food-option draggable" data-food="burger" data-impact="high" data-timing="60-90">🍔
                        Burger</div>
                    <div class="food-option draggable" data-food="croissant" data-impact="high" data-timing="30-45">🥐
                        Croissant</div>
                </div>

                <!-- Explanation of timing moved to after the submit button -->
                <div
                    style="background: #fff; padding: 15px; border-radius: 8px; max-width: 800px; margin: 20px auto; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h4 style="margin-top: 0; color: #0066CC;">Food Timing & Glucose Response</h4>
                    <ul style="margin-bottom: 0;">
                        <li><strong>Fast-acting carbs</strong> (juice, white bread): Spike in 15-30 minutes</li>
                        <li><strong>Mixed meals</strong> (sandwich, rice): Spike in 30-60 minutes</li>
                        <li><strong>High-fat meals</strong> (burgers, pizza): Delayed spike, 1-2 hours</li>
                    </ul>
                </div>
            </div>



            <div class="clock-container" style="margin: 0 auto; display: flex; justify-content: center;">
                <svg id="glucose-clock" width="600" height="600" viewBox="0 0 600 600">
                    <!-- Clock face background -->
                    <circle cx="300" cy="300" r="280" fill="white" class="clock-face" />

                    <!-- Outer bezel -->
                    <circle cx="300" cy="300" r="270" fill="none" stroke="#e0e0e5" stroke-width="2" />

                    <!-- Glucose zones shading -->
                    <circle cx="300" cy="300" r="280" fill="rgba(255, 253, 231, 0.6)" stroke="none" />
                    <!-- Background zone -->
                    <circle cx="300" cy="300" r="150" fill="rgba(235, 255, 240, 0.6)" stroke="none" />
                    <!-- Target zone -->

                    <!-- Glucose level circles and labels - centered properly -->
                    <!-- Each label is positioned exactly at the top of its circle -->
                    <circle cx="300" cy="300" r="250" fill="none" stroke="#e8e8f0" stroke-width="1"
                        class="glucose-level-circle" />
                    <text x="300" y="55" text-anchor="middle" font-size="12" fill="#aaa">160 mg/dL</text>

                    <circle cx="300" cy="300" r="200" fill="none" stroke="#e8e8f0" stroke-width="1"
                        class="glucose-level-circle" />
                    <text x="300" y="105" text-anchor="middle" font-size="12" fill="#aaa">140 mg/dL</text>

                    <circle cx="300" cy="300" r="150" fill="none" stroke="#e8e8f0" stroke-width="1"
                        class="glucose-level-circle" />
                    <text x="300" y="155" text-anchor="middle" font-size="12" fill="#aaa">120 mg/dL</text>

                    <circle cx="300" cy="300" r="100" fill="none" stroke="#e8e8f0" stroke-width="1"
                        class="glucose-level-circle" />
                    <text x="300" y="205" text-anchor="middle" font-size="12" fill="#aaa">100 mg/dL</text>

                    <circle cx="300" cy="300" r="50" fill="none" stroke="#e8e8f0" stroke-width="1"
                        class="glucose-level-circle" />
                    <text x="300" y="255" text-anchor="middle" font-size="12" fill="#aaa">80 mg/dL</text>

                    <!-- Minute markers - generated with exact 5-degree spacing -->
                    <g id="minute-markers">
                        <!-- Quarter-hour markers -->
                        <!-- 12:15, 12:30, 12:45 -->
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(7.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(15 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(22.5 300 300)" />

                        <!-- 1:15, 1:30, 1:45 -->
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(37.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(45 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(52.5 300 300)" />

                        <!-- 2:15, 2:30, 2:45 -->
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(67.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(75 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(82.5 300 300)" />

                        <!-- Continuing for other hours -->
                        <!-- Only showing quarter hour markers for all hours -->
                        <!-- 3 through 11 quarter-hour marks -->
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(97.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(105 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(112.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(127.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(135 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(142.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(157.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(165 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(172.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(187.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(195 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(202.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(217.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(225 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(232.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(247.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(255 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(262.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(277.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(285 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(292.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(307.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(315 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(322.5 300 300)" />

                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(337.5 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker" transform="rotate(345 300 300)" />
                        <line x1="300" y1="40" x2="300" y2="60" class="minute-marker"
                            transform="rotate(352.5 300 300)" />
                    </g>

                    <!-- Hour markers - perfectly spaced at exactly 30 degrees -->
                    <g id="hour-markers">
                        <!-- 12 o'clock -->
                        <line x1="300" y1="30" x2="300" y2="50" class="hour-marker" />
                        <text x="300" y="20" class="time-label">12:00</text>

                        <!-- 1 o'clock (30 degrees) -->
                        <line x1="435" y1="82.5" x2="422.5" y2="95" class="hour-marker" />
                        <text x="447.5" y="70" class="time-label">01:00</text>

                        <!-- 2 o'clock (60 degrees) -->
                        <line x1="517.5" y1="182.5" x2="497.5" y2="195" class="hour-marker" />
                        <text x="530" y="170" class="time-label">02:00</text>

                        <!-- 3 o'clock (90 degrees) -->
                        <line x1="550" y1="300" x2="530" y2="300" class="hour-marker" />
                        <text x="565" y="305" class="time-label">03:00</text>

                        <!-- 4 o'clock (120 degrees) -->
                        <line x1="517.5" y1="417.5" x2="497.5" y2="405" class="hour-marker" />
                        <text x="530" y="430" class="time-label">04:00</text>

                        <!-- 5 o'clock (150 degrees) -->
                        <line x1="435" y1="517.5" x2="422.5" y2="505" class="hour-marker" />
                        <text x="447.5" y="530" class="time-label">05:00</text>

                        <!-- 6 o'clock (180 degrees) -->
                        <line x1="300" y1="550" x2="300" y2="530" class="hour-marker" />
                        <text x="300" y="565" class="time-label">06:00</text>

                        <!-- 7 o'clock (210 degrees) -->
                        <line x1="165" y1="517.5" x2="177.5" y2="505" class="hour-marker" />
                        <text x="152.5" y="530" class="time-label">07:00</text>

                        <!-- 8 o'clock (240 degrees) -->
                        <line x1="82.5" y1="417.5" x2="102.5" y2="405" class="hour-marker" />
                        <text x="70" y="430" class="time-label">08:00</text>

                        <!-- 9 o'clock (270 degrees) -->
                        <line x1="50" y1="300" x2="70" y2="300" class="hour-marker" />
                        <text x="35" y="305" class="time-label">09:00</text>

                        <!-- 10 o'clock (300 degrees) -->
                        <line x1="82.5" y1="182.5" x2="102.5" y2="195" class="hour-marker" />
                        <text x="70" y="170" class="time-label">10:00</text>

                        <!-- 11 o'clock (330 degrees) -->
                        <line x1="165" y1="82.5" x2="177.5" y2="95" class="hour-marker" />
                        <text x="152.5" y="70" class="time-label">11:00</text>
                    </g>

                    <!-- Pre-defined glucose spike at 2:00 PM -->
                    <g id="glucose-event">
                        <!-- Visual representation of the spike -->
                        <path id="glucose-spike"
                            d="M300,300 L517.5,182.5 C500,150 480,160 460,170 C440,180 420,200 400,220 C380,240 350,260 320,280 Z"
                            fill="rgba(255, 107, 107, 0.2)" stroke="#FF6B6B" stroke-width="2" />

                        <!-- Marker showing the exact peak time -->
                        <circle cx="517.5" cy="182.5" r="8" fill="#FF6B6B" stroke="#fff" stroke-width="2" />
                        <text x="530" y="170" text-anchor="middle" font-size="12" fill="#FF6B6B" font-weight="bold">152
                            mg/dL</text>

                        <!-- Label for the spike -->
                        <text x="450" y="140" text-anchor="middle" font-size="13" fill="#FF6B6B"
                            font-weight="bold">Glucose Spike</text>
                    </g>

                    <!-- Drop target indicator - visual feedback when dragging -->
                    <circle id="drop-target" cx="300" cy="300" r="25" class="drop-target" />

                    <!-- Time indicator line (initially hidden) -->
                    <line id="time-indicator-line" x1="300" y1="300" x2="300" y2="50" class="time-indicator-line"
                        style="display: none;" />

                    <!-- Clickable area for the entire clock -->
                    <circle id="clickable-area" cx="300" cy="300" r="270" fill="transparent" />

                    <!-- Clock center decoration -->
                    <circle cx="300" cy="300" r="12" fill="#444" stroke="#fff" stroke-width="2" />
                    <circle cx="300" cy="300" r="5" fill="#fff" />

                    <!-- Legend at the bottom with proper positioning -->
                    <g transform="translate(190, 530)">
                        <rect x="0" y="0" width="220" height="70" rx="5" fill="white" fill-opacity="0.9"
                            stroke="#eaeaea" />
                        <line x1="20" y1="20" x2="50" y2="20" stroke="#FF6B6B" stroke-width="2" />
                        <text x="60" y="25" font-size="13" fill="#444">Glucose Spike (2:00 PM)</text>
                        <line x1="20" y1="45" x2="50" y2="45" stroke="#0066CC" stroke-width="2"
                            stroke-dasharray="5,3" />
                        <text x="60" y="50" font-size="13" fill="#444">Drag food here to place</text>
                    </g>
                </svg>

                <!-- Time indicator label -->
                <div id="time-indicator-label" class="time-indicator-label" style="display: none;">12:00 PM</div>
            </div>

            <!-- Submit analysis button added below the clock -->
            <button id="submit-analysis-btn" class="submit-analysis-btn">Submit Your Analysis</button>



            <div class="results-panel" style="margin: 30px auto;">
                <h2>Analysis Results</h2>
                <div class="score">Score: 85/100</div>

                <div class="feedback">
                    <p><strong>Good analysis!</strong> This is very likely what caused Sarah's glucose spike.</p>

                    <p>The <span id="placed-food-name">Apple</span> you placed at <span id="placed-food-time">1:15
                            PM</span> typically causes glucose to rise within <span id="food-timing">30-45
                            minutes</span>, which aligns well with the 2:00 PM spike Sarah experienced.</p>

                    <h3>Insights</h3>
                    <p>This food raised Sarah's glucose by approximately <strong>82 mg/dL</strong> at its peak (from
                        baseline of 70 mg/dL to 152 mg/dL). The response lasted about <strong>2.5 hours</strong> before
                        returning to baseline.</p>

                    <p>For Sarah, this food is a <strong id="glycemic-impact">moderate</strong> glycemic impact food.
                        She might consider pairing it with protein or healthy fats to reduce the spike in the future.
                    </p>

                    <div style="background: #f5f7fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <h4 style="margin-top: 0; color: #0066CC;">Recommendations for Sarah:</h4>
                        <ul style="margin-bottom: 0;">
                            <li>Try consuming this food with a source of protein or healthy fat</li>
                            <li>Consider eating smaller portions spread throughout the day</li>
                            <li>A short 10-minute walk after eating can help reduce glucose spikes</li>
                        </ul>
                    </div>
                </div>

                <button id="try-another-btn" class="submit-btn">Try Another Analysis</button>
            </div>
        </div>
    </div>

    <!-- Notification for prediction set -->
    <div id="prediction-notification" class="prediction-notification">
        Prediction set! Click Submit when ready.
    </div>

    <!-- Fun facts button and modal -->
    <div class="fun-fact-button" id="fun-fact-button">🍬</div>

    <div class="fun-fact-overlay" id="fun-fact-overlay"></div>

    <div class="fun-fact-modal" id="fun-fact-modal">
        <div class="fun-fact-close" id="fun-fact-close">×</div>
        <h3><span>🍬</span> Sweet Glucose Facts</h3>
        <div class="fun-fact-content" id="fun-fact-content"></div>
        <div class="fun-fact-navigation">
            <div class="fun-fact-counter"><span id="current-fact">1</span>/<span id="total-facts">12</span></div>
            <button class="fun-fact-button-next" id="next-fact-button">Next Fact</button>
        </div>
    </div>
</body>

</html>